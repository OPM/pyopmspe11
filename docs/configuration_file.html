

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration file &mdash; pyopmspe11  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #aaaaaa" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration file</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#txt">txt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reservoir-related-parameters">Reservoir-related parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#soil-related-parameters">Soil-related parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#well-related-parameters">Well-related parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#toml">toml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">pyopmspe11 Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_folder.html">Output folder</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About pyopmspe11</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #aaaaaa" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyopmspe11</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Configuration file</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/configuration_file.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-file">
<h1>Configuration file<a class="headerlink" href="#configuration-file" title="Link to this heading"></a></h1>
<p>In the initial development of <strong>pyopmspe11</strong>, the adopted configuration file format was the
one described below, i.e., via <a class="reference internal" href="#txt"><span class="std std-ref">txt</span></a> files. The current development of <strong>pyopmspe11</strong> considers
<a class="reference internal" href="#toml"><span class="std std-ref">toml</span></a> files. To keep compatibility with previous configuration files and Python versions of at least 3.8,
then support for <a class="reference internal" href="#txt"><span class="std std-ref">txt</span></a> files will be kept, while new features will by added using <a class="reference internal" href="#toml"><span class="std std-ref">toml</span></a> configuration
files (which requires at least Python3.11).</p>
<section id="txt">
<span id="id1"></span><h2>txt<a class="headerlink" href="#txt" title="Link to this heading"></a></h2>
<p>The first input parameter in the configuration file is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="sd">&quot;&quot;&quot;Set the full path to the flow executable and flags&quot;&quot;&quot;</span>
<span class="linenos">2</span><span class="n">flow</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">tuning</span><span class="o">=</span><span class="n">true</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">opm</span><span class="o">-</span><span class="n">rst</span><span class="o">-</span><span class="n">file</span><span class="o">=</span><span class="n">true</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">extra</span><span class="o">-</span><span class="n">convergence</span><span class="o">-</span><span class="n">info</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span><span class="n">iterations</span>
</pre></div>
</div>
<p>If <strong>flow</strong> is not in your path, then write the full path to the executable
(e.g., /Users/dmar/opm/build/opm-simulators/bin/flow). We also add in the same
line as many flags as required (see the OPM Flow documentation <a class="reference external" href="https://opm-project.org/?page_id=955">here</a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have installed flow with MPI support, then you can run the simulations in
parallel by adding <strong>mpirun -np N flow …</strong> where N is the number of cpus.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By executing flow -h you get an overview of the available flags in the
flow simulator to improve/fix convergence and mass issues (i.e., by setting the flag --linear-solver=cprw to change the linear solver,
by tightening the cnv tolerances (--tolerance-cnv), etc.).</p>
</div>
<section id="reservoir-related-parameters">
<h3>Reservoir-related parameters<a class="headerlink" href="#reservoir-related-parameters" title="Link to this heading"></a></h3>
<p>The following input lines in the configuration file are:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 4</span><span class="sd">&quot;&quot;&quot;Set the model parameters&quot;&quot;&quot;</span>
<span class="linenos"> 5</span><span class="n">spe11c</span> <span class="n">master</span>     <span class="c1">#Name of the spe case (spe11a, spe11b, or spe11c) and OPM Flow version (master or release)</span>
<span class="linenos"> 6</span><span class="n">complete</span> <span class="n">gaswater</span> <span class="c1">#Name of the co2 model (immiscible, convective, or complete) and co2store implementation (gaswater or gasoil [oil properties are set to water internally in OPM flow])</span>
<span class="linenos"> 7</span><span class="n">corner</span><span class="o">-</span><span class="n">point</span>      <span class="c1">#Type of grid (cartesian, tensor, or corner-point)</span>
<span class="linenos"> 8</span><span class="mi">8400</span> <span class="mi">5000</span> <span class="mi">1200</span>    <span class="c1">#Length, width, and depth [m]</span>
<span class="linenos"> 9</span><span class="mi">420</span>               <span class="c1">#If cartesian, number of x cells [-]; otherwise, variable array of x-refinment</span>
<span class="linenos">10</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">30</span>    <span class="c1">#If cartesian, number of y cells [-]; otherwise, variable array of y-refinment [-] (for spe11c)</span>
<span class="linenos">11</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">9</span> <span class="c1">#If cartesian, number of z cells [-]; if tensor, variable array of z-refinment; if corner-point, fix array of z-refinment (18 entries)</span>
<span class="linenos">12</span><span class="mi">70</span> <span class="mf">36.12</span>          <span class="c1">#Temperature bottom and top rig [C]</span>
<span class="linenos">13</span><span class="mi">300</span> <span class="mf">3e7</span> <span class="mf">0.1</span>       <span class="c1">#Datum [m], pressure at the datum [Pa], and multiplier for the permeability in the z direction [-]</span>
<span class="linenos">14</span><span class="mf">1e-9</span> <span class="mf">2e-8</span>         <span class="c1">#Diffusion (in liquid and gas) [m^2/s]</span>
<span class="linenos">15</span><span class="mf">8.5e-1</span> <span class="mi">2500</span>       <span class="c1">#Rock specific heat and density (for spe11b/c)</span>
<span class="linenos">16</span><span class="mi">0</span> <span class="mf">5e4</span> <span class="mi">1</span>           <span class="c1">#Added pore volume on top boundary (for spe11a [if 0, free flow bc]), pore volume on lateral boundaries, and width of buffer cell [m] (for spe11b/c)</span>
<span class="linenos">17</span><span class="mi">150</span> <span class="mi">10</span>            <span class="c1">#Elevation of the parabola and back [m] (for spe11c)</span>
</pre></div>
</div>
<p>In line 5 you specify if you are using OPM Flow from the master branch or from the latest stable release (OPM-flow 2024.04 release).
This since there are continuous changues in the OPM master branch. Then we
will keep updating the decks for using Flow from master and also we will keep the framework to produce decks compatible for the latest OPM stable release.
The immiscible model allows for faster prototyping while the complete model includes dissolution of the components in the
gas and liquid phases, in addition to thermal effects. The convective model requires a Flow version newer than 22-08-2024; details on the model and keyword can be found in this <a class="reference external" href="https://github.com/OPM/opm-simulators/pull/3076">link</a>.
Regarding the grid type, the cartesian mode generates an uniform grid
with the defined number of elements in lines 9 to 11. The tensor grid allows to define arrays in each direction where the grid
is first divided with the number of entries in the array, and after it divides each of these elements by the assigned number in
the array entry. The corner-point mode generates a grid where the x and y direction are defined as in the array mode, but the
cell faces in the z-direction follows the lines as defined in the <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/src/pyopmspe11/reference_mesh/lines_coordinates.geo">lines_coordinates.geo</a> script,
resulting in 18 levels. Then, the z-refinment in each of these levels is set. See the configuration files in the <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/tests">tests</a> and
<a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples">examples</a> folder for the setting of these grids.</p>
<figure class="align-default">
<img alt="_images/satnum.png" src="_images/satnum.png" />
</figure>
<figure class="align-default" id="id3">
<img alt="_images/fipnum.png" src="_images/fipnum.png" />
<figcaption>
<p><span class="caption-text">Corner-point grid generated by the configuration file (INJ0 the horizontal well and INJ1 the curve well).
The top figure shows the 7 different facies, while the bottom figure shows the fipnum numbers used to identify
the boxes (A, B, and C), sensors, and the required regions to report the benchmark data.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="soil-related-parameters">
<h3>Soil-related parameters<a class="headerlink" href="#soil-related-parameters" title="Link to this heading"></a></h3>
<p>The following entries define the properties of the different facies:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">19</span><span class="sd">&quot;&quot;&quot;Set the saturation functions&quot;&quot;&quot;</span>
<span class="linenos">20</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s_w</span> <span class="o">-</span> <span class="n">swi</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">swi</span><span class="p">)))</span> <span class="o">**</span> <span class="mf">1.5</span>                                                        <span class="c1">#Wetting rel perm saturation function [-]</span>
<span class="linenos">21</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">s_w</span> <span class="o">-</span> <span class="n">sni</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">sni</span><span class="p">)))</span> <span class="o">**</span> <span class="mf">1.5</span>                                                    <span class="c1">#Non-wetting rel perm saturation function [-]</span>
<span class="linenos">22</span><span class="n">penmax</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">erf</span><span class="p">(</span><span class="n">pen</span> <span class="o">*</span> <span class="p">((</span><span class="n">s_w</span><span class="o">-</span><span class="n">swi</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.</span><span class="o">-</span><span class="n">swi</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">1.5</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">/</span> <span class="p">(</span><span class="n">penmax</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">#Capillary pressure saturation function [Pa]</span>
<span class="linenos">23</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="n">npoints</span><span class="p">)))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>                         <span class="c1">#Points to evaluate the saturation functions (s_w) [-]</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="sd">&quot;&quot;&quot;Properties sat functions&quot;&quot;&quot;</span>
<span class="linenos">26</span><span class="sd">&quot;&quot;&quot;swi [-], sni [-], pen [Pa], penmax [Pa], npoints [-]&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="n">SWI1</span> <span class="mf">0.32</span> <span class="n">SNI1</span> <span class="mf">0.1</span> <span class="n">PEN1</span> <span class="mf">193531.39</span> <span class="n">PENMAX1</span> <span class="mf">3e7</span> <span class="n">NPOINTS1</span> <span class="mi">1000</span>
<span class="linenos">28</span><span class="n">SWI2</span> <span class="mf">0.14</span> <span class="n">SNI2</span> <span class="mf">0.1</span> <span class="n">PEN2</span>   <span class="mf">8654.99</span> <span class="n">PENMAX2</span> <span class="mf">3e7</span> <span class="n">NPOINTS2</span> <span class="mi">1000</span>
<span class="linenos">29</span><span class="n">SWI3</span> <span class="mf">0.12</span> <span class="n">SNI3</span> <span class="mf">0.1</span> <span class="n">PEN3</span>   <span class="mf">6120.00</span> <span class="n">PENMAX3</span> <span class="mf">3e7</span> <span class="n">NPOINTS3</span> <span class="mi">1000</span>
<span class="linenos">30</span><span class="n">SWI4</span> <span class="mf">0.12</span> <span class="n">SNI4</span> <span class="mf">0.1</span> <span class="n">PEN4</span>   <span class="mf">3870.63</span> <span class="n">PENMAX4</span> <span class="mf">3e7</span> <span class="n">NPOINTS4</span> <span class="mi">1000</span>
<span class="linenos">31</span><span class="n">SWI5</span> <span class="mf">0.12</span> <span class="n">SNI5</span> <span class="mf">0.1</span> <span class="n">PEN5</span>   <span class="mf">3060.00</span> <span class="n">PENMAX5</span> <span class="mf">3e7</span> <span class="n">NPOINTS5</span> <span class="mi">1000</span>
<span class="linenos">32</span><span class="n">SWI6</span> <span class="mf">0.10</span> <span class="n">SNI6</span> <span class="mf">0.1</span> <span class="n">PEN6</span>   <span class="mf">2560.18</span> <span class="n">PENMAX6</span> <span class="mf">3e7</span> <span class="n">NPOINTS6</span> <span class="mi">1000</span>
<span class="linenos">33</span><span class="n">SWI7</span>    <span class="mi">0</span> <span class="n">SNI7</span>   <span class="mi">0</span> <span class="n">PEN7</span>         <span class="mi">0</span> <span class="n">PENMAX7</span> <span class="mf">3e7</span> <span class="n">NPOINTS7</span>    <span class="mi">2</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="sd">&quot;&quot;&quot;Properties rock&quot;&quot;&quot;</span>
<span class="linenos">36</span><span class="sd">&quot;&quot;&quot;K [mD], phi [-], disp [m], thconr [W m-1 K-1]&quot;&quot;&quot;</span>
<span class="linenos">37</span><span class="n">PERM1</span> <span class="mf">0.10132</span> <span class="n">PORO1</span> <span class="mf">0.10</span> <span class="n">DISP1</span> <span class="mi">10</span> <span class="n">THCONR1</span> <span class="mf">1.90</span>
<span class="linenos">38</span><span class="n">PERM2</span> <span class="mf">101.324</span> <span class="n">PORO2</span> <span class="mf">0.20</span> <span class="n">DISP2</span> <span class="mi">10</span> <span class="n">THCONR2</span> <span class="mf">1.25</span>
<span class="linenos">39</span><span class="n">PERM3</span> <span class="mf">202.650</span> <span class="n">PORO3</span> <span class="mf">0.20</span> <span class="n">DISP3</span> <span class="mi">10</span> <span class="n">THCONR3</span> <span class="mf">1.25</span>
<span class="linenos">40</span><span class="n">PERM4</span> <span class="mf">506.625</span> <span class="n">PORO4</span> <span class="mf">0.20</span> <span class="n">DISP4</span> <span class="mi">10</span> <span class="n">THCONR4</span> <span class="mf">1.25</span>
<span class="linenos">41</span><span class="n">PERM5</span> <span class="mf">1013.25</span> <span class="n">PORO5</span> <span class="mf">0.25</span> <span class="n">DISP5</span> <span class="mi">10</span> <span class="n">THCONR5</span> <span class="mf">0.92</span>
<span class="linenos">42</span><span class="n">PERM6</span> <span class="mf">2026.50</span> <span class="n">PORO6</span> <span class="mf">0.35</span> <span class="n">DISP6</span> <span class="mi">10</span> <span class="n">THCONR6</span> <span class="mf">0.26</span>
<span class="linenos">43</span><span class="n">PERM7</span>    <span class="mf">1e-5</span> <span class="n">PORO7</span> <span class="mf">1e-6</span> <span class="n">DISP7</span>  <span class="mi">0</span> <span class="n">THCONR7</span> <span class="mf">2.00</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="_images/kr.png" src="_images/kr.png" />
</figure>
<figure class="align-default" id="id4">
<img alt="_images/cap.png" src="_images/cap.png" />
<figcaption>
<p><span class="caption-text">Visualization in ResInsight of the relative permeability and capillary pressure functions in the facie 1.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="well-related-parameters">
<h3>Well-related parameters<a class="headerlink" href="#well-related-parameters" title="Link to this heading"></a></h3>
<p>The last part of the configuration file sets the wells radius, location, and the injection schedule.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">45</span><span class="sd">&quot;&quot;&quot;Wells radius and position&quot;&quot;&quot;</span>
<span class="linenos">46</span><span class="sd">&quot;&quot;&quot;radius (0 to use the SOURCE keyword instead of well keywords), x, y, and z position [m] (final positions as well for spe11c)&quot;&quot;&quot;</span>
<span class="linenos">47</span><span class="mf">0.15</span> <span class="mf">2700.</span> <span class="mf">1000.</span> <span class="mf">300.</span> <span class="mf">2700.</span> <span class="mf">4000.</span> <span class="mf">300.</span> <span class="c1">#Well 1</span>
<span class="linenos">48</span><span class="mf">0.15</span> <span class="mf">5100.</span> <span class="mf">1000.</span> <span class="mf">700.</span> <span class="mf">5100.</span> <span class="mf">4000.</span> <span class="mf">700.</span> <span class="c1">#Well 2</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="sd">&quot;&quot;&quot;Define the injection values ([hours] for spe11a; [years] for spe11b/c)&quot;&quot;&quot;</span>
<span class="linenos">51</span><span class="sd">&quot;&quot;&quot;injection time, time step size to write results, maximum solver time step, injected fluid (0 water, 1 co2) (well1), injection rate [kg/s] (well1), temperature [C] (well1), injected fluid (0 water, 1 co2) (well2), ...&quot;&quot;&quot;</span>
<span class="linenos">52</span><span class="mf">999.9</span> <span class="mf">999.9</span>    <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
<span class="linenos">53</span>  <span class="mf">0.1</span>   <span class="mf">0.1</span>   <span class="mf">0.1</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
<span class="linenos">54</span>   <span class="mi">25</span>     <span class="mi">5</span>     <span class="mi">5</span> <span class="mi">1</span> <span class="mi">50</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
<span class="linenos">55</span>   <span class="mi">25</span>     <span class="mi">5</span>     <span class="mi">5</span> <span class="mi">1</span> <span class="mi">50</span> <span class="mi">10</span> <span class="mi">1</span> <span class="mi">50</span> <span class="mi">10</span>
<span class="linenos">56</span>   <span class="mi">50</span>    <span class="mi">25</span>    <span class="mi">25</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
<span class="linenos">57</span>  <span class="mi">400</span>    <span class="mi">50</span>    <span class="mi">50</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
<span class="linenos">58</span>  <span class="mi">500</span>   <span class="mi">100</span>   <span class="mi">100</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span> <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Keep the linebreak between the sections (in the current implementation this is used for the reading of the parameters).</p>
</div>
</section>
</section>
<section id="toml">
<span id="id2"></span><h2>toml<a class="headerlink" href="#toml" title="Link to this heading"></a></h2>
<p>The previous configuration file can be written using the widely in-use <a class="reference external" href="https://docs.python.org/3/library/tomllib.html">toml format</a> as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Set the full path to the flow executable and flags</span>
<span class="linenos"> 2</span><span class="n">flow</span> <span class="o">=</span> <span class="s2">&quot;flow --enable-tuning=true --enable-opm-rst-file=true --output-extra-convergence-info=steps,iterations&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Set the model parameters</span>
<span class="linenos"> 5</span><span class="n">spe11</span> <span class="o">=</span> <span class="s2">&quot;spe11c&quot;</span> <span class="c1"># Name of the spe case (spe11a, spe11b, or spe11c)</span>
<span class="linenos"> 6</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;release&quot;</span> <span class="c1"># OPM Flow version (release or master)</span>
<span class="linenos"> 7</span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;complete&quot;</span> <span class="c1"># Name of the co2 model (immiscible, convective, or complete)</span>
<span class="linenos"> 8</span><span class="n">co2store</span> <span class="o">=</span> <span class="s2">&quot;gaswater&quot;</span> <span class="c1"># co2store implementation (gaswater or gasoil [oil properties are set to water internally in OPM flow])</span>
<span class="linenos"> 9</span><span class="n">grid</span> <span class="o">=</span> <span class="s2">&quot;corner-point&quot;</span> <span class="c1"># Type of grid (cartesian, tensor, or corner-point)</span>
<span class="linenos">10</span><span class="n">dims</span> <span class="o">=</span> <span class="p">[</span><span class="mf">8400.0</span><span class="p">,</span> <span class="mf">5000.0</span><span class="p">,</span> <span class="mf">1200.0</span><span class="p">]</span> <span class="c1"># Length, width, and depth [m]</span>
<span class="linenos">11</span><span class="n">x_n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">420</span><span class="p">]</span> <span class="c1"># If cartesian, number of x cells [-]; otherwise, variable array of x-refinment</span>
<span class="linenos">12</span><span class="n">y_n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="c1"># If cartesian, number of y cells [-]; otherwise, variable array of y-refinment [-] (for spe11c)</span>
<span class="linenos">13</span><span class="n">z_n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="c1"># If cartesian, number of z cells [-]; if tensor, variable array of z-refinment; if corner-point, fix array of z-refinment (18 entries)</span>
<span class="linenos">14</span><span class="n">temperature</span> <span class="o">=</span> <span class="p">[</span><span class="mf">70.0</span><span class="p">,</span> <span class="mf">36.12</span><span class="p">]</span> <span class="c1"># Temperature bottom and top rig [C]</span>
<span class="linenos">15</span><span class="n">datum</span> <span class="o">=</span> <span class="mi">300</span> <span class="c1"># Datum [m]</span>
<span class="linenos">16</span><span class="n">pressure</span> <span class="o">=</span> <span class="mf">3e7</span> <span class="c1"># Pressure at the datum [Pa]</span>
<span class="linenos">17</span><span class="n">kzMult</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># Multiplier for the permeability in the z direction [-]</span>
<span class="linenos">18</span><span class="n">diffusion</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-9</span><span class="p">,</span> <span class="mf">2e-8</span><span class="p">]</span> <span class="c1"># Diffusion (in liquid and gas) [m^2/s]</span>
<span class="linenos">19</span><span class="n">rockExtra</span> <span class="o">=</span> <span class="p">[</span><span class="mf">8.5e-1</span><span class="p">,</span> <span class="mf">2500.0</span><span class="p">]</span> <span class="c1"># Rock specific heat capacity [kJ/(kg K)] and rock density [kg/m^3] (for spe11b/c)</span>
<span class="linenos">20</span><span class="n">pvAdded</span> <span class="o">=</span> <span class="mf">5e4</span>  <span class="c1"># Extra pore volume per area on lateral boundaries [m] (for spe11b/c)</span>
<span class="linenos">21</span><span class="n">widthBuffer</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Width of buffer cells [m] (for spe11b/c)</span>
<span class="linenos">22</span><span class="n">elevation</span> <span class="o">=</span> <span class="mi">150</span> <span class="c1"># Maximum elevation difference (relative to the baseline gradient) of the arch in the y direction [m] (for spe11c)</span>
<span class="linenos">23</span><span class="n">backElevation</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># Back boundary elevation w.r.t the front boundary [m] (for spe11c)</span>
<span class="linenos">24</span><span class="n">dispersion</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Dispersion rock [m], facie 1 to 7</span>
<span class="linenos">25</span><span class="n">rockCond</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">0.92</span><span class="p">,</span> <span class="mf">0.26</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span> <span class="c1"># Thermal conductivity rock [W/(m K)], facie 1 to 7</span>
<span class="linenos">26</span><span class="n">radius</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">]</span> <span class="c1"># Wells radius [m] (0 to use the SOURCE keyword instead of well keywords), well 1 to 2</span>
<span class="linenos">27</span><span class="n">wellCoord</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2700.0</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">5100.0</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mf">700.0</span><span class="p">]]</span> <span class="c1"># Well positions: x, y, and z coordinates [m], well 1 to 2</span>
<span class="linenos">28</span><span class="n">wellCoordF</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2700.0</span><span class="p">,</span> <span class="mf">4000.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">5100.0</span><span class="p">,</span> <span class="mf">4000.0</span><span class="p">,</span> <span class="mf">700.0</span><span class="p">]]</span> <span class="c1"># Well final positions: x, y, and z coordinates [m], well 1 to 2 (for spe11c)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="c1"># Set the saturation functions</span>
<span class="linenos">31</span><span class="n">krw</span> <span class="o">=</span> <span class="s2">&quot;(max(0, (s_w - swi) / (1 - swi))) ** 1.5&quot;</span>                                                         <span class="c1"># Wetting rel perm saturation function [-]</span>
<span class="linenos">32</span><span class="n">krn</span> <span class="o">=</span> <span class="s2">&quot;(max(0, (1 - s_w - sni) / (1 - sni))) ** 1.5&quot;</span>                                                     <span class="c1"># Non-wetting rel perm saturation function [-]</span>
<span class="linenos">33</span><span class="n">pcap</span> <span class="o">=</span> <span class="s2">&quot;penmax * math.erf(pen * ((s_w-swi) / (1.-swi)) ** (-(1.0 / 1.5)) * math.pi**0.5 / (penmax * 2))&quot;</span> <span class="c1"># Capillary pressure saturation function [Pa]</span>
<span class="linenos">34</span><span class="n">s_w</span> <span class="o">=</span> <span class="s2">&quot;(np.exp(np.flip(np.linspace(0, 5.0, npoints))) - 1) / (np.exp(5.0) - 1)&quot;</span>                          <span class="c1"># Points to evaluate the saturation functions (s_w) [-]</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="c1"># Properties sat functions: 1) swi [-], 2) sni [-], 3) pen [Pa], 4) penmax [Pa], and 5) npoints [-], facie 1 to 7</span>
<span class="linenos">37</span><span class="n">safu</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.32</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">193531.39</span><span class="p">,</span> <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">38</span>        <span class="p">[</span><span class="mf">0.14</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">8654.99</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">39</span>        <span class="p">[</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">6120.00</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">40</span>        <span class="p">[</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">3870.63</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">41</span>        <span class="p">[</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">3060.00</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">42</span>        <span class="p">[</span><span class="mf">0.10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">2560.18</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
<span class="linenos">43</span>        <span class="p">[</span><span class="mi">0</span><span class="p">,</span>      <span class="mi">0</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span>   <span class="mf">3e7</span><span class="p">,</span>    <span class="mi">2</span><span class="p">]]</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="c1"># Properties rock: 1) K [mD] and 2) phi [-], facie 1 to 7</span>
<span class="linenos">46</span><span class="n">rock</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.10132</span><span class="p">,</span> <span class="mf">0.10</span><span class="p">],</span>
<span class="linenos">47</span>        <span class="p">[</span><span class="mf">101.324</span><span class="p">,</span> <span class="mf">0.20</span><span class="p">],</span>
<span class="linenos">48</span>        <span class="p">[</span><span class="mf">202.650</span><span class="p">,</span> <span class="mf">0.20</span><span class="p">],</span>
<span class="linenos">49</span>        <span class="p">[</span><span class="mf">506.625</span><span class="p">,</span> <span class="mf">0.20</span><span class="p">],</span>
<span class="linenos">50</span>        <span class="p">[</span><span class="mf">1013.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
<span class="linenos">51</span>        <span class="p">[</span><span class="mf">2026.50</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">],</span>
<span class="linenos">52</span>        <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span>    <span class="mf">1e-6</span><span class="p">]]</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="c1"># Define the injection values ([hours] for spe11a; [years] for spe11b/c): 1) injection time, 2) time step size to write results, 3) maximum solver time step, 4) injected fluid (0 water, 1 co2) (well1), 5) injection rate [kg/s] (well1), 6) temperature [C] (well1), 7) injected fluid (0 water, 1 co2) (well2), 8) injection rate [kg/s] (well2), and 9) temperature [C] (well2)</span>
<span class="linenos">55</span><span class="n">inj</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">999.9</span><span class="p">,</span> <span class="mf">999.9</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">56</span>       <span class="p">[</span>  <span class="mf">0.1</span><span class="p">,</span>   <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">57</span>       <span class="p">[</span>   <span class="mi">25</span><span class="p">,</span>     <span class="mi">5</span><span class="p">,</span>   <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">58</span>       <span class="p">[</span>   <span class="mi">25</span><span class="p">,</span>     <span class="mi">5</span><span class="p">,</span>   <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">59</span>       <span class="p">[</span>   <span class="mi">50</span><span class="p">,</span>    <span class="mi">25</span><span class="p">,</span>  <span class="mi">25</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">60</span>       <span class="p">[</span>  <span class="mi">400</span><span class="p">,</span>    <span class="mi">50</span><span class="p">,</span>  <span class="mi">50</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="linenos">61</span>       <span class="p">[</span>  <span class="mi">500</span><span class="p">,</span>   <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]</span>
</pre></div>
</div>
<p>For additional examples of configuration files using toml, see the
<a class="reference external" href="https://github.com/OPM/pyopmspe11/tree/main/examples/hello_world">hello_world</a> and <a class="reference external" href="https://github.com/OPM/pyopmspe11/tree/main/tests/configs">configs</a> folders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A Python version of at least 3.11 is requiered to use the toml format. For older Python versions, then use the <a class="reference internal" href="#txt"><span class="std std-ref">txt</span></a> configuration files.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, NORCE Norwegian Research Centre AS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>